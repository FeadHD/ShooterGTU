<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Base Scene Documentation</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }

        h1, h2, h3 {
            color: #2c3e50;
            margin-top: 30px;
        }

        .container {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .code-example {
            background-color: #1e1e1e;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 10px 0;
        }

        .code-example code {
            color: #d4d4d4;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
            line-height: 1.5;
        }

        .comment { color: #6a9955; }
        .keyword { color: #569cd6; }
        .string { color: #ce9178; }
        .function { color: #dcdcaa; }
        .number { color: #b5cea8; }

        .initializer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .initializer-card {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background-color: #f8f9fa;
            font-weight: 600;
        }

        tr:hover {
            background-color: #f5f5f5;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Base Scene Documentation</h1>
        
        <section>
            <h2>Overview</h2>
            <p>
                The BaseScene class is the foundational scene class in ShooterGTU, providing essential game functionality and 
                structure for all derived scenes. It handles core game mechanics including physics setup, player management, 
                enemy interactions, and state management. This class ensures consistent behavior and standardized initialization 
                across all game scenes.
            </p>
        </section>

        <section>
            <h2>File Dependencies</h2>

            <h3>Required Dependencies</h3>
            <table>
                <tr>
                    <th>File Path</th>
                    <th>Purpose</th>
                </tr>
                <tr>
                    <td><code>/modules/di/ManagerFactory.js</code></td>
                    <td>Creates and injects core game managers</td>
                </tr>
                <tr>
                    <td><code>/modules/state/Store.js</code></td>
                    <td>Global state management system</td>
                </tr>
                <tr>
                    <td><code>/scenes/elements/GameUI.js</code></td>
                    <td>Game interface and HUD components</td>
                </tr>
                <tr>
                    <td><code>/prefabs/Player.js</code></td>
                    <td>Player character implementation</td>
                </tr>
                <tr>
                    <td><code>/prefabs/ParallaxBackground.js</code></td>
                    <td>Background scrolling system</td>
                </tr>
                <tr>
                    <td><code>/config/GameConfig.js</code></td>
                    <td>Game constants and configuration</td>
                </tr>
                <tr>
                    <td><code>/modules/state/types.js</code></td>
                    <td>Game state and action type definitions</td>
                </tr>
                <tr>
                    <td><code>/systems/ErrorSystem.js</code></td>
                    <td>Error handling and recovery system</td>
                </tr>
            </table>

            <h3>Dependent Scenes</h3>
            <p>Game levels that extend BaseScene:</p>

            <ul>
                <li><strong>Main Game Levels</strong>
                    <ul>
                        <li><code>/scenes/levels/GameScene1.js</code></li>
                        <li><code>/scenes/levels/GameScene2.js</code></li>
                        <li><code>/scenes/levels/GameScene3.js</code></li>
                        <li><code>/scenes/levels/GameScene4.js</code></li>
                        <li><code>/scenes/levels/GameScene5.js</code></li>
                    </ul>
                </li>
                <li><strong>Test Levels</strong>
                    <ul>
                        <li><code>/scenes/levels/GtuTestLevel0.js</code></li>
                        <li><code>/scenes/levels/GtuTestLevel1.js</code></li>
                        <li><code>/scenes/levels/GtuTestLevel2.js</code></li>
                        <li><code>/scenes/levels/BlueTest.js</code></li>
                    </ul>
                </li>
                <li><strong>Special Scenes</strong>
                    <ul>
                        <li><code>/scenes/levels/Matrix640x360.js</code></li>
                        <li><code>/scenes/levels/CombinedGtuLevel.js</code></li>
                        <li><code>/scenes/levels/LegacyGameScene1.js</code></li>
                    </ul>
                </li>
            </ul>

            <h3>Testing Dependencies</h3>
            <ul>
                <li>
                    <strong>Mock Implementation</strong>
                    <p><code>/scenes/levels/__mocks__/baseScene.mock.js</code></p>
                    <p>Provides a mock version of BaseScene for testing</p>
                </li>
                <li>
                    <strong>Test Files</strong>
                    <p><code>/scenes/levels/__tests__/GameScene1.test.js</code></p>
                    <p>Contains test cases for scene functionality</p>
                </li>
            </ul>
        </section>

        <section>
            <h2>Core Initialization Systems</h2>
            <div class="initializer-grid">
                <div class="initializer-card">
                    <h3>Scene Setup</h3>
                    <div class="code-example">
                        <pre><code><span class="comment">// Scene initialization</span>
<span class="keyword">class</span> <span class="function">BaseScene</span> <span class="keyword">extends</span> Scene {
    <span class="function">create</span>() {
        <span class="comment">// Initialize managers</span>
        this.<span class="function">#initializeManagers</span>();
        
        <span class="comment">// Setup core systems</span>
        this.<span class="function">#setupMusic</span>();
        this.<span class="function">#initializeController</span>();
        
        <span class="comment">// Register event handlers</span>
        this.<span class="function">#registerSceneEvents</span>();
    }
}</code></pre>
                    </div>
                </div>

                <div class="initializer-card">
                    <h3>State Management</h3>
                    <div class="code-example">
                        <pre><code><span class="comment">// State initialization</span>
<span class="function">#initializeSceneState</span>() {
    <span class="comment">// Set initial state</span>
    this.store.<span class="function">dispatch</span>({
        type: ActionTypes.SET_GAME_STATUS,
        payload: GameStatus.PLAYING
    });

    <span class="comment">// Initialize player state</span>
    this.store.<span class="function">dispatch</span>({
        type: ActionTypes.SET_PLAYER_STATE,
        payload: PlayerState.ALIVE
    });
}</code></pre>
                    </div>
                </div>
            </div>
        </section>

        <section>
            <h2>Game Object Groups</h2>
            <table>
                <tr>
                    <th>Group Name</th>
                    <th>Type</th>
                    <th>Purpose</th>
                </tr>
                <tr>
                    <td>player</td>
                    <td>Physics Sprite</td>
                    <td>Main player character with physics and collision</td>
                </tr>
                <tr>
                    <td>enemies</td>
                    <td>Physics Group</td>
                    <td>Collection of all enemy entities</td>
                </tr>
                <tr>
                    <td>bullets</td>
                    <td>Physics Group</td>
                    <td>Player and enemy projectiles</td>
                </tr>
                <tr>
                    <td>parallaxBackground</td>
                    <td>Sprite Group</td>
                    <td>Multi-layered scrolling background</td>
                </tr>
                <tr>
                    <td>gameUI</td>
                    <td>Container</td>
                    <td>HUD and interface elements</td>
                </tr>
            </table>
        </section>

        <section>
            <h2>Manager Integration</h2>
            <div class="initializer-grid">
                <div class="initializer-card">
                    <h3>Core Managers</h3>
                    <ul>
                        <li>
                            <strong>Store Manager</strong>
                            <p>Handles global game state and events</p>
                        </li>
                        <li>
                            <strong>Music Manager</strong>
                            <p>Controls background music and sound effects</p>
                        </li>
                        <li>
                            <strong>Debug Manager</strong>
                            <p>Provides debugging tools and performance monitoring</p>
                        </li>
                        <li>
                            <strong>Collision Manager</strong>
                            <p>Manages physics collisions and interactions</p>
                        </li>
                    </ul>
                </div>

                <div class="initializer-card">
                    <h3>Event Handlers</h3>
                    <ul>
                        <li>
                            <strong>Store Updates</strong>
                            <p>Responds to global state changes</p>
                            <code>this.store.subscribe(this.#handleStoreUpdate)</code>
                        </li>
                        <li>
                            <strong>Scene Events</strong>
                            <p>Handles scene lifecycle events</p>
                            <code>this.events.on('shutdown', this.#cleanup)</code>
                        </li>
                        <li>
                            <strong>Player Events</strong>
                            <p>Manages player-specific events</p>
                            <code>this.events.on('playerDeath', this.#handlePlayerDeath)</code>
                        </li>
                    </ul>
                </div>
            </div>
        </section>

        <section>
            <h2>Error Handling</h2>
            <div class="initializer-grid">
                <div class="initializer-card">
                    <h3>Error Recovery</h3>
                    <ul>
                        <li>
                            <strong>Component Reinitialization</strong>
                            <p>Automatically recovers from component failures</p>
                        </li>
                        <li>
                            <strong>State Recovery</strong>
                            <p>Restores scene state after errors</p>
                        </li>
                        <li>
                            <strong>Resource Management</strong>
                            <p>Handles texture and audio loading errors</p>
                        </li>
                    </ul>
                </div>

                <div class="initializer-card">
                    <h3>Monitoring Systems</h3>
                    <ul>
                        <li>
                            <strong>Performance Monitoring</strong>
                            <p>Tracks FPS and memory usage</p>
                        </li>
                        <li>
                            <strong>Asset Validation</strong>
                            <p>Verifies texture and audio assets</p>
                        </li>
                        <li>
                            <strong>Error Logging</strong>
                            <p>Detailed error tracking and reporting</p>
                        </li>
                    </ul>
                </div>
            </div>
        </section>
    </div>
</body>
</html>
